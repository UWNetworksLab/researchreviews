      var files = document.getElementById("addFile").files;
      if (files.length < 1) {
        alert("No files found.");
        return;
      }

      var comments = document.getElementById("add-paper-comments").value;
      var alertList = [];
      for(var i = 0; i < $scope.alerts.length; i++) 
        alertList.push($scope.alerts[i]); 

      var viewList;
      if(!$scope.privatePaper) { //publicly shared
        viewList = false; 
      }
      else { //privately shared
        viewList = alertList; 
        alertList = $scope.checkList; 
      }
       var newPaper = new Paper();
     
      var vdata = {
        vnum: 0,
        pkey: newPaper.pkey,
        title: files[0].name,
        author: username,
        comments: comments,
        viewList: viewList,
        alertList: alertList,
        privateSetting: $scope.privatePaper, 
      };

      var ver = new Version(vdata);
      ver.uploadPDF(files[0]);

      newPaper.addVersion(ver);
      papers.push(newPaper);  
      currPaper = newPaper;
      ver.shareVersion();
      $modalInstance.dismiss('cancel');
    };


